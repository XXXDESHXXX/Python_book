Поток активности - это список последних действий, выполненных пользователем или группой пользователей. Например новостная лента Facebook
Пользователь X пометил изображение Y закладкой или теперь пользователь X подписан на пользователя Y.
Contenttypes - это фреймворк расположенный по умолчанию в приложении django.contrib.contenttypes.
Само приложение contenttypes содержит модель ContentType. Экземпляры этой модели представляют фактические модели приложения, а новые экземпляры добавляются автоматически при установке в проект новых моделей.
Модель ContentType имеет следующие поля:
- app_label: указывает имя приложения, которому модель принадлежит.
Оно берется автоматически из атрибута app_label модельных Metaопций. Например, ваша модель Image принадлежит приложению images;
- model: имя модельного класса;
- name: указывает удобочитаемое имя модели. Оно берется автоматически
из атрибута verbose_name модельных Meta-опций.
Для того чтобы установить обобщённое отношение, в модели нужны 3 поля:
- поле ForeignKey для ContentType: оно будет сообщать о модели, используемой для взаимосвязи
- поле для хранения первичного ключа связанного объекта: обычно это
PositiveIntegerField, чтобы сочетаться со встроенными в Django автоматическими полями первичных ключей;
- поле для определения обобщенного отношения и управления им с использованием двух предыдущих полей: для этой цели фреймворк contenttypes предлагает поле GenericForeignKey
Применение обобщённых отношений вместо внешних ключей будет придавать приложениям большую гибкость!


Существуют метод select_related(), который позволяет извлекать связанные объекты для взаимосвязей одни-ко-многим.
Это транслируется в один более сложный набор запросов, но позволяет избегать дополнителных запросов при доступе к связанным объектам.
Сам метод предназначен для полей ForeignKey и OneToOne.
Он работает, выполняя SQL-инструкцию JOIN и включая поля связанного объекта в инструкцию SELECT.
Следует всегда ограничивать этот метод взаимосвязями, которые будут доступны позже.


Существует метод prefetch_related(), который работает для взаимосвязей многие-ко-многим или многие-к-одному.
Этот метод поддерживает упреждающую выборку полей GenericRelation и GenericForeignKey.
